import{d as g,a0 as M,u as V,k as F,o as i,c as j,w as a,g as h,a as e,b as l,e as d,t as _,i as N,F as O,h as c,n as A}from"./app.ae2cf3f4.js";import{_ as H}from"./ActionSection.0952141c.js";import{_ as y}from"./PrimaryButton.2025ea0e.js";import{a as U}from"./DialogModal.5cd0f916.js";import{_ as E}from"./InputError.2be43ac3.js";import{_ as Y}from"./SecondaryButton.c0b15f49.js";import{_ as $}from"./TextInput.a0cfbf3c.js";import{_ as z}from"./DangerButton.0369e84d.js";import"./SectionTitle.3593116f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const P={class:"space-y-6"},q={class:"flex justify-end"},D=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),I={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},J=e("thead",{class:"bg-gray-800 dark:bg-neutral-800"},[e("tr",{class:"text-gray-200 dark:text-gray-200 text-left"},[e("th",{scope:"col",class:"px-6 py-3 text-xs font-semibold uppercase tracking-wider border-b border-gray-700"}," Name "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-semibold uppercase tracking-wider border-b border-gray-700"}," Slug "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-semibold uppercase tracking-wider border-b border-gray-700"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-xs font-semibold uppercase tracking-wider border-b border-gray-700"}," Actions ")])],-1),K={class:"divide-y divide-gray-200 dark:divide-gray-700 dark:text-gray-200"},Q={key:0},R=e("td",{colspan:"4",class:"px-6 py-4 text-center"},[e("div",{class:"flex justify-center"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})])],-1),W=[R],X={key:1},Z={colspan:"4",class:"px-6 py-4 text-center text-red-600"},ee={key:2},te=e("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"}," No categories found ",-1),se=[te],re={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4"},le=["onClickOnce"],ne=e("input",{type:"checkbox",class:"sr-only peer"},null,-1),ie=e("div",{class:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 dark:peer-focus:ring-neutral-800 rounded-full peer dark:bg-neutral-800 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:after:bg-neutral-700 dark:after:border-neutral-700 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-gray-200"},null,-1),ce=[ne,ie],de=["onClickOnce"],ue=e("input",{type:"checkbox",class:"sr-only peer",checked:""},null,-1),fe=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-gray-300 dark:peer-focus:ring-neutral-800 dark:bg-neutral-800 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-neutral-600 peer-checked:bg-gray-600"},null,-1),pe=[ue,fe],me={class:"px-6 py-4 whitespace-nowrap text-sm"},ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),he=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),_e={class:"grid gap-4"},ve=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Name ",-1),ke=e("label",{for:"slug",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Slug ",-1),Me={__name:"Categories",setup(we){const x=g([]),v=g(null),n=M("$swal"),f=g(!0),u=g(!1),p=g(!1),t=V({id:null,name:"",slug:"",status:1}),b=async()=>{try{const r=await axios.get("/admin/categories");x.value=r.data,v.value=null}catch(r){v.value=r.message,m("Error","Failed to load categories","error")}finally{f.value=!1}};F(()=>{b()});const k=()=>{f.value=!0,b()},C=(r=null)=>{r?(p.value=!0,t.id=r.id,t.name=r.name,t.slug=r.slug,t.status=r.status):(p.value=!1,t.reset(),t.clearErrors(),t.id=null,t.name="",t.slug="",t.status=!0),u.value=!0},L=()=>{p.value?t.put(route("categories.update",t.id),{preserveScroll:!0,onSuccess:()=>{u.value=!1,m("Success","Category updated"),k(),t.reset(),t.clearErrors()},onError:()=>{m("Error","Something went wrong","error")},onFinish:()=>{t.reset(),f.value=!1}}):t.post(route("categories.store"),{preserveScroll:!0,onSuccess:()=>{u.value=!1,m("Success","Category created"),k(),t.reset(),t.clearErrors()},onError:()=>{m("Error","Something went wrong","error")},onFinish:()=>{t.reset(),f.value=!1}})},T=r=>{n.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",background:"#fff",color:"#00000",width:400,position:"center",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#212529",confirmButtonText:"Yes, delete it!"}).then(o=>{o.isConfirmed&&t.delete(route("categories.destroy",r),{preserveScroll:!0,onSuccess:()=>{n.fire({position:"center",color:"#00000",width:400,background:"#fff",icon:"success",title:"Category deleted successfully",showConfirmButton:!1,timer:1500}),k()},onError:s=>{n.fire({position:"center",color:"#00000",width:400,background:"#fff",icon:"error",title:s.error||"Cannot delete category. It has associated blogs.",showConfirmButton:!0,confirmButtonColor:"#212529"})}})})},B=r=>{setTimeout(()=>{t.put(route("categories.toggle.status",r.id),{preserveScroll:!0,onSuccess:()=>{n.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:1700,timerProgressBar:!0,didOpen:s=>{s.addEventListener("mouseenter",n.stopTimer),s.addEventListener("mouseleave",n.resumeTimer)}}).fire({icon:"success",title:r.status?"Category inactive":"Category active"}),k()}})},500)},m=(r,o,s="success")=>{n.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:1700,timerProgressBar:!0,didOpen:S=>{S.addEventListener("mouseenter",n.stopTimer),S.addEventListener("mouseleave",n.resumeTimer)}}).fire({icon:s,title:o})};return(r,o)=>(i(),j(H,null,{title:a(()=>[h(" Categories Management ")]),description:a(()=>[h(" Manage your categories here. You can create, edit, delete, and toggle the status of categories. ")]),content:a(()=>[e("div",P,[e("div",q,[l(y,{onClick:o[0]||(o[0]=s=>C())},{default:a(()=>[D]),_:1})]),e("div",I,[e("table",G,[J,e("tbody",K,[f.value?(i(),d("tr",Q,W)):v.value?(i(),d("tr",X,[e("td",Z,_(v.value),1)])):x.value.length===0?(i(),d("tr",ee,se)):(i(!0),d(O,{key:3},N(x.value,s=>(i(),d("tr",{key:s.id},[e("td",re,_(s.name),1),e("td",oe,_(s.slug),1),e("td",ae,[s.status?(i(),d("div",{key:1,"preserve-scroll":"",onClickOnce:w=>B(s),class:"inline-flex relative items-center cursor-pointer"},pe,40,de)):(i(),d("div",{key:0,"preserve-scroll":"",onClickOnce:w=>B(s),class:"inline-flex relative items-center cursor-pointer"},ce,40,le))]),e("td",me,[l(y,{onClick:w=>C(s),class:"ml-1"},{default:a(()=>[ge]),_:2},1032,["onClick"]),l(z,{onClick:w=>T(s.id),class:"ml-1"},{default:a(()=>[he]),_:2},1032,["onClick"])])]))),128))])])])]),l(U,{show:u.value,onClose:o[4]||(o[4]=s=>u.value=!1)},{title:a(()=>[h(_(p.value?"Edit Category":"Create Category"),1)]),content:a(()=>[e("div",_e,[e("div",null,[ve,l($,{id:"name",modelValue:c(t).name,"onUpdate:modelValue":o[1]||(o[1]=s=>c(t).name=s),type:"text",class:"mt-1 block w-full",placeholder:"Category name",required:""},null,8,["modelValue"]),l(E,{message:c(t).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[ke,l($,{id:"slug",modelValue:c(t).slug,"onUpdate:modelValue":o[2]||(o[2]=s=>c(t).slug=s),type:"text",class:"mt-1 block w-full",placeholder:"category-slug"},null,8,["modelValue"]),l(E,{message:c(t).errors.slug,class:"mt-2"},null,8,["message"])])])]),footer:a(()=>[l(Y,{onClick:o[3]||(o[3]=s=>u.value=!1)},{default:a(()=>[h(" Cancel ")]),_:1}),l(y,{class:A(["ml-3",{"opacity-25":c(t).processing}]),disabled:c(t).processing,onClick:L},{default:a(()=>[h(_(p.value?"Update":"Create"),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}};export{Me as default};
