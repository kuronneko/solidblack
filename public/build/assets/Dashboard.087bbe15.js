import{D as _e,d as b,E as xe,l as j,s as U,G,I as be,j as p,J as Re,K as we,h as $,M as J,N as K,C as Q,L as Ee,y as X,O as C,o as P,c as ke,w as L,a as x,b as R,g as S,e as T,f as Y,m as Ce,n as Le,i as Oe,F as Ve,t as Pe}from"./app.0775ce1e.js";import{_ as je}from"./AppLayout.5f376e5a.js";import{_ as Se}from"./PrimaryButton.00381389.js";import{P as Te}from"./Paginator.ae888c3b.js";import{a as Ie,_ as Ae}from"./TextInput.72ae6929.js";import{_ as ze}from"./InputLabel.de7e514e.js";import{_ as Be}from"./FormSection.b15ad21e.js";import{S as De}from"./SectionBorder.d533b480.js";import Fe from"./DeleteAllLog.5408381f.js";import{_ as Ne}from"./_plugin-vue_export-helper.cdc0426e.js";import"./TermsOfService.451316ce.js";import"./AuthenticationCardLogo.a29c0186.js";import"./SectionTitle.08ff5ec2.js";import"./DialogModal.4acd4657.js";import"./DangerButton.4fd5048f.js";import"./SecondaryButton.9290b674.js";function ee(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=$(e[r])),t),{})}function A(e){return typeof e=="function"}function Ue(e){return Re(e)||we(e)}function oe(e,n,t){let r=e;const s=n.split(".");for(let o=0;o<s.length;o++){if(!r[s[o]])return t;r=r[s[o]]}return r}function N(e,n,t){return p(()=>e.some(r=>oe(n,r,{[t]:!1})[t]))}function te(e,n,t){return p(()=>e.reduce((r,s)=>{const o=oe(n,s,{[t]:!1})[t]||[];return r.concat(o)},[]))}function ie(e,n,t,r){return e.call(r,$(n),$(t),r)}function le(e){return e.$valid!==void 0?!e.$valid:!e}function Me(e,n,t,r,s,o,v){let{$lazy:i,$rewardEarly:g}=s,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],d=arguments.length>8?arguments[8]:void 0,f=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const l=b(!!r.value),a=b(0);t.value=!1;const m=j([n,r].concat(c,h),()=>{if(i&&!r.value||g&&!f.value&&!t.value)return;let u;try{u=ie(e,n,d,v)}catch(_){u=Promise.reject(_)}a.value++,t.value=!!a.value,l.value=!1,Promise.resolve(u).then(_=>{a.value--,t.value=!!a.value,o.value=_,l.value=le(_)}).catch(_=>{a.value--,t.value=!!a.value,o.value=_,l.value=!0})},{immediate:!0,deep:typeof n=="object"});return{$invalid:l,$unwatch:m}}function Ge(e,n,t,r,s,o,v,i){let{$lazy:g,$rewardEarly:c}=r;const d=()=>({}),f=p(()=>{if(g&&!t.value||c&&!i.value)return!1;let h=!0;try{const l=ie(e,n,v,o);s.value=l,h=le(l)}catch(l){s.value=l}return h});return{$unwatch:d,$invalid:f}}function qe(e,n,t,r,s,o,v,i,g,c,d){const f=b(!1),h=e.$params||{},l=b(null);let a,m;e.$async?{$invalid:a,$unwatch:m}=Me(e.$validator,n,f,t,r,l,s,e.$watchTargets,g,c,d):{$invalid:a,$unwatch:m}=Ge(e.$validator,n,t,r,l,s,g,c);const u=e.$message;return{$message:A(u)?p(()=>u(ee({$pending:f,$invalid:a,$params:ee(h),$model:n,$response:l,$validator:o,$propertyPath:i,$property:v}))):u||"",$params:h,$pending:f,$invalid:a,$response:l,$unwatch:m}}function We(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=$(e),t=Object.keys(n),r={},s={},o={};let v=null;return t.forEach(i=>{const g=n[i];switch(!0){case A(g.$validator):r[i]=g;break;case A(g):r[i]={$validator:g};break;case i==="$validationGroups":v=g;break;case i.startsWith("$"):o[i]=g;break;default:s[i]=g}}),{rules:r,nestedValidators:s,config:o,validationGroups:v}}function Ze(){}const He="__root";function ue(e,n,t){if(t)return n?n(e()):e();try{var r=Promise.resolve(e());return n?r.then(n):r}catch(s){return Promise.reject(s)}}function Je(e,n){return ue(e,Ze,n)}function Ke(e,n){var t=e();return t&&t.then?t.then(n):n(t)}function Qe(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(e.apply(this,n))}catch(r){return Promise.reject(r)}}}function Xe(e,n,t,r,s,o,v,i,g){const c=Object.keys(e),d=r.get(s,e),f=b(!1),h=b(!1),l=b(0);if(d){if(!d.$partial)return d;d.$unwatch(),f.value=d.$dirty.value}const a={$dirty:f,$path:s,$touch:()=>{f.value||(f.value=!0)},$reset:()=>{f.value&&(f.value=!1)},$commit:()=>{}};return c.length?(c.forEach(m=>{a[m]=qe(e[m],n,a.$dirty,o,v,m,t,s,g,h,l)}),a.$externalResults=p(()=>i.value?[].concat(i.value).map((m,u)=>({$propertyPath:s,$property:t,$validator:"$externalResults",$uid:`${s}-externalResult-${u}`,$message:m,$params:{},$response:null,$pending:!1})):[]),a.$invalid=p(()=>{const m=c.some(u=>$(a[u].$invalid));return h.value=m,!!a.$externalResults.value.length||m}),a.$pending=p(()=>c.some(m=>$(a[m].$pending))),a.$error=p(()=>a.$dirty.value?a.$pending.value||a.$invalid.value:!1),a.$silentErrors=p(()=>c.filter(m=>$(a[m].$invalid)).map(m=>{const u=a[m];return G({$propertyPath:s,$property:t,$validator:m,$uid:`${s}-${m}`,$message:u.$message,$params:u.$params,$response:u.$response,$pending:u.$pending})}).concat(a.$externalResults.value)),a.$errors=p(()=>a.$dirty.value?a.$silentErrors.value:[]),a.$unwatch=()=>c.forEach(m=>{a[m].$unwatch()}),a.$commit=()=>{h.value=!0,l.value=Date.now()},r.set(s,e,a),a):(d&&r.set(s,e,a),a)}function Ye(e,n,t,r,s,o,v){const i=Object.keys(e);return i.length?i.reduce((g,c)=>(g[c]=M({validations:e[c],state:n,key:c,parentKey:t,resultsCache:r,globalConfig:s,instance:o,externalResults:v}),g),{}):{}}function et(e,n,t){const r=p(()=>[n,t].filter(a=>a).reduce((a,m)=>a.concat(Object.values($(m))),[])),s=p({get(){return e.$dirty.value||(r.value.length?r.value.every(a=>a.$dirty):!1)},set(a){e.$dirty.value=a}}),o=p(()=>{const a=$(e.$silentErrors)||[],m=r.value.filter(u=>($(u).$silentErrors||[]).length).reduce((u,_)=>u.concat(..._.$silentErrors),[]);return a.concat(m)}),v=p(()=>{const a=$(e.$errors)||[],m=r.value.filter(u=>($(u).$errors||[]).length).reduce((u,_)=>u.concat(..._.$errors),[]);return a.concat(m)}),i=p(()=>r.value.some(a=>a.$invalid)||$(e.$invalid)||!1),g=p(()=>r.value.some(a=>$(a.$pending))||$(e.$pending)||!1),c=p(()=>r.value.some(a=>a.$dirty)||r.value.some(a=>a.$anyDirty)||s.value),d=p(()=>s.value?g.value||i.value:!1),f=()=>{e.$touch(),r.value.forEach(a=>{a.$touch()})},h=()=>{e.$commit(),r.value.forEach(a=>{a.$commit()})},l=()=>{e.$reset(),r.value.forEach(a=>{a.$reset()})};return r.value.length&&r.value.every(a=>a.$dirty)&&f(),{$dirty:s,$errors:v,$invalid:i,$anyDirty:c,$error:d,$pending:g,$touch:f,$reset:l,$silentErrors:o,$commit:h}}function M(e){const n=Qe(function(){return F(),Ke(function(){if(u.$rewardEarly)return H(),Je(Q)},function(){return ue(Q,function(){return new Promise(y=>{if(!D.value)return y(!B.value);const k=j(D,()=>{y(!B.value),k()})})})})});let{validations:t,state:r,key:s,parentKey:o,childResults:v,resultsCache:i,globalConfig:g={},instance:c,externalResults:d}=e;const f=o?`${o}.${s}`:s,{rules:h,nestedValidators:l,config:a,validationGroups:m}=We(t),u=Object.assign({},g,a),_=s?p(()=>{const y=$(r);return y?$(y[s]):void 0}):r,V=Object.assign({},$(d)||{}),q=p(()=>{const y=$(d);return s?y?$(y[s]):void 0:y}),W=Xe(h,_,s,i,f,u,c,q,r),E=Ye(l,_,f,i,u,c,q),Z={};m&&Object.entries(m).forEach(y=>{let[k,w]=y;Z[k]={$invalid:N(w,E,"$invalid"),$error:N(w,E,"$error"),$pending:N(w,E,"$pending"),$errors:te(w,E,"$errors"),$silentErrors:te(w,E,"$silentErrors")}});const{$dirty:z,$errors:fe,$invalid:B,$anyDirty:me,$error:ge,$pending:D,$touch:F,$reset:$e,$silentErrors:ve,$commit:H}=et(W,E,v),pe=s?p({get:()=>$(_),set:y=>{z.value=!0;const k=$(r),w=$(d);w&&(w[s]=V[s]),U(k[s])?k[s].value=y:k[s]=y}}):null;s&&u.$autoDirty&&j(_,()=>{z.value||F();const y=$(d);y&&(y[s]=V[s])},{flush:"sync"});function he(y){return(v.value||{})[y]}function ye(){U(d)?d.value=V:Object.keys(V).length===0?Object.keys(d).forEach(y=>{delete d[y]}):Object.assign(d,V)}return G(Object.assign({},W,{$model:pe,$dirty:z,$error:ge,$errors:fe,$invalid:B,$anyDirty:me,$pending:D,$touch:F,$reset:$e,$path:f||He,$silentErrors:ve,$validate:n,$commit:H},v&&{$getResultsForChild:he,$clearExternalResults:ye,$validationGroups:Z},E))}class tt{constructor(){this.storage=new Map}set(n,t,r){this.storage.set(n,{rules:t,result:r})}checkRulesValidity(n,t,r){const s=Object.keys(r),o=Object.keys(t);return o.length!==s.length||!o.every(i=>s.includes(i))?!1:o.every(i=>t[i].$params?Object.keys(t[i].$params).every(g=>$(r[i].$params[g])===$(t[i].$params[g])):!0)}get(n,t){const r=this.storage.get(n);if(!r)return;const{rules:s,result:o}=r,v=this.checkRulesValidity(n,t,s),i=o.$unwatch?o.$unwatch:()=>({});return v?o:{$dirty:o.$dirty,$partial:!0,$unwatch:i}}}const I={COLLECT_ALL:!0,COLLECT_NONE:!1},re=Symbol("vuelidate#injectChildResults"),ne=Symbol("vuelidate#removeChildResults");function rt(e){let{$scope:n,instance:t}=e;const r={},s=b([]),o=p(()=>s.value.reduce((d,f)=>(d[f]=$(r[f]),d),{}));function v(d,f){let{$registerAs:h,$scope:l,$stopPropagation:a}=f;a||n===I.COLLECT_NONE||l===I.COLLECT_NONE||n!==I.COLLECT_ALL&&n!==l||(r[h]=d,s.value.push(h))}t.__vuelidateInjectInstances=[].concat(t.__vuelidateInjectInstances||[],v);function i(d){s.value=s.value.filter(f=>f!==d),delete r[d]}t.__vuelidateRemoveInstances=[].concat(t.__vuelidateRemoveInstances||[],i);const g=J(re,[]);K(re,t.__vuelidateInjectInstances);const c=J(ne,[]);return K(ne,t.__vuelidateRemoveInstances),{childResults:o,sendValidationResultsToParent:g,removeValidationResultsFromParent:c}}function ce(e){return new Proxy(e,{get(n,t){return typeof n[t]=="object"?ce(n[t]):p(()=>n[t])}})}let se=0;function ae(e,n){var t;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(r=e,e=void 0,n=void 0);let{$registerAs:s,$scope:o=I.COLLECT_ALL,$stopPropagation:v,$externalResults:i,currentVueInstance:g}=r;const c=g||((t=_e())===null||t===void 0?void 0:t.proxy),d=c?c.$options:{};s||(se+=1,s=`_vuelidate_${se}`);const f=b({}),h=new tt,{childResults:l,sendValidationResultsToParent:a,removeValidationResultsFromParent:m}=c?rt({$scope:o,instance:c}):{childResults:b({})};if(!e&&d.validations){const u=d.validations;n=b({}),xe(()=>{n.value=c,j(()=>A(u)?u.call(n.value,new ce(n.value)):u,_=>{f.value=M({validations:_,state:n,childResults:l,resultsCache:h,globalConfig:r,instance:c,externalResults:i||c.vuelidateExternalResults})},{immediate:!0})}),r=d.validationsConfig||r}else{const u=U(e)||Ue(e)?e:G(e||{});j(u,_=>{f.value=M({validations:_,state:n,childResults:l,resultsCache:h,globalConfig:r,instance:c!=null?c:{},externalResults:i})},{immediate:!0})}return c&&(a.forEach(u=>u(f,{$registerAs:s,$scope:o,$stopPropagation:v})),be(()=>m.forEach(u=>u(s)))),p(()=>Object.assign({},$(f.value),l.value))}const de=e=>{if(e=$(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let n in e)return!0;return!1}return!!String(e).length};function O(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return r=>(r=$(r),!de(r)||n.every(s=>s.test(r)))}O(/^[a-zA-Z]*$/);O(/^[a-zA-Z0-9]*$/);O(/^\d*(\.\d+)?$/);const nt=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;O(nt);function st(e){return typeof e=="string"&&(e=e.trim()),de(e)}var at={$validator:st,$message:"Value is required",$params:{type:"required"}};const ot=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;var it=O(ot),lt={$validator:it,$message:"The value is not a valid URL address",$params:{type:"url"}};O(/(^[0-9]*$)|(^-[0-9]+$)/);O(/^[-]?\d*(\.\d+)?$/);const ut={setup(){return{v$:ae()}},props:{user:Object},data(){return{url:this.setUrl(),redirect:this.user.setting.redirect,isLoading:null}},validations(){return{redirect:{required:at,url:lt,$autoDirty:!0}}},components:{DeleteAllLog:Fe,SectionBorder:De,useVuelidate:ae,FormSection:Be,InputError:Ie,InputLabel:ze,TextInput:Ae,AppLayout:je,PrimaryButton:Se,Paginator:Te,Link:Ee},methods:{Toast(){return this.$swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:1700,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",this.$swal.stopTimer),e.addEventListener("mouseleave",this.$swal.resumeTimer)}})},setUrl(){let e=this.user.setting.uuid,n=location.hostname;return"https"+"://"+n+"/api/network/get/"+e},copyUrl(){navigator.clipboard&&(navigator.clipboard.writeText(this.url),console.log(this.url),this.Toast().fire({icon:"success",title:"URL Copied to your clipboard"}))},toggleSilenceMode:function(e){setTimeout(()=>{X.Inertia.post(route("silence_mode",{user:e.id}),{_method:"put"}),e.setting.redirect===null&&(this.redirect="https://www.google.com"),this.user.setting.silence_mode==0?this.Toast().fire({icon:"success",title:"Silent mode ON"}):this.Toast().fire({icon:"success",title:"Silent mode OFF"})},500)},saveRedirect:function(e){this.v$.$touch(),!this.v$.$error&&e.setting.silence_mode==0&&(this.isLoading=!0,X.Inertia.post(route("save_redirect",{user:e.id,redirect:this.redirect}),{_method:"put"}),setTimeout(()=>{this.Toast().fire({icon:"success",title:"Redirect URL saved"}),this.isLoading=null},1e3))}}},ct=x("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Dashboard ",-1),dt={class:"max-w-7xl mx-auto py-10 sm:px-6 lg:px-8"},ft={class:"col-span-6 sm:col-span-12"},mt={class:"flex"},gt={class:"col-span-6 sm:col-span-12"},$t=x("input",{type:"checkbox",value:"",id:"default-toggle",class:"sr-only peer"},null,-1),vt=x("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-gray-300 dark:peer-focus:ring-gray-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-gray-600"},null,-1),pt=x("span",{class:"ml-3 text-xs font-medium text-gray-900 dark:text-gray-300"},"Silent mode does not redirect when link is clicked",-1),ht=[$t,vt,pt],yt=x("input",{type:"checkbox",value:"",id:"checked-toggle",class:"sr-only peer",checked:""},null,-1),_t=x("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-gray-300 dark:peer-focus:ring-gray-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-gray-600"},null,-1),xt=x("span",{class:"ml-3 text-xs font-medium text-gray-900 dark:text-gray-300"},"Silent mode does not redirect when link is clicked",-1),bt=[yt,_t,xt],Rt={class:"col-span-6 sm:col-span-12"};function wt(e,n,t,r,s,o){const v=C("InputLabel"),i=C("TextInput"),g=C("PrimaryButton"),c=C("FormSection"),d=C("SectionBorder"),f=C("DeleteAllLog"),h=C("AppLayout");return P(),ke(h,{title:"Dashboard"},{header:L(()=>[ct]),default:L(()=>[x("div",null,[x("div",dt,[R(c,null,{title:L(()=>[S(" IP Logger Settings ")]),description:L(()=>[S(" Update your account's information, and use the URL link to capture IPs. ")]),form:L(()=>[x("div",ft,[R(v,{for:"url",value:"URL"}),x("div",mt,[R(i,{readonly:"",modelValue:s.url,"onUpdate:modelValue":n[0]||(n[0]=l=>s.url=l),type:"text",class:"mt-1 block w-full",autocomplete:"url"},null,8,["modelValue"]),R(g,{onClick:n[1]||(n[1]=l=>o.copyUrl()),class:"ml-1"},{default:L(()=>[S("Copy ")]),_:1})])]),x("div",gt,[R(v,{for:"silence_mode",value:"Silent Mode",class:"mb-2"}),x("div",null,[t.user.setting.silence_mode==0?(P(),T("label",{key:0,"preserve-scroll":"",onClickOnce:n[2]||(n[2]=l=>o.toggleSilenceMode(t.user)),for:"default-toggle",class:"inline-flex relative items-center cursor-pointer"},ht,32)):Y("",!0),t.user.setting.silence_mode==1?(P(),T("label",{key:1,"preserve-scroll":"",onClickOnce:n[3]||(n[3]=l=>o.toggleSilenceMode(t.user)),for:"checked-toggle",class:"inline-flex relative items-center cursor-pointer"},bt,32)):Y("",!0)])]),x("div",Rt,[R(v,{for:"redirect",value:"Redirecto to"}),x("form",{onSubmit:n[5]||(n[5]=Ce(l=>o.saveRedirect(t.user),["prevent"])),class:"flex"},[R(i,{modelValue:s.redirect,"onUpdate:modelValue":n[4]||(n[4]=l=>s.redirect=l),disabled:t.user.setting.silence_mode==1,id:"redirect",type:"text",class:Le(["mt-1 block w-full",r.v$.redirect.$error===!0?"border-gray-300 focus:border-red-300 focus:ring focus:ring-red-200 focus:ring-opacity-50 rounded-md shadow-sm":""])},null,8,["modelValue","disabled","class"]),R(g,{disabled:t.user.setting.silence_mode==1||this.isLoading===!0,class:"ml-1"},{default:L(()=>[S(" Save ")]),_:1},8,["disabled"])],32),(P(!0),T(Ve,null,Oe(r.v$.redirect.$errors,l=>(P(),T("span",{class:"text-danger small",key:l.$uid},Pe(l.$message),1))),128))])]),_:1}),R(d),R(f,{class:"mt-10 sm:mt-0"})])])]),_:1})}const Nt=Ne(ut,[["render",wt]]);export{Nt as default};
